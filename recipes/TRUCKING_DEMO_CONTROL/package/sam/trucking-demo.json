{"topologyName":"iot-demo","config":"{\"topology.workers\":1,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"\"}","sources":[{"id":2,"topologyId":1,"topologyComponentBundleId":1,"versionId":3,"name":"truck-speed-events","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"g1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"{{HOST1}}:6667","kafkaServiceName":"","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"{{CLUSTERNAME}}","fetchMinimumBytes":"1","consumerStartupDelayMs":60000,"sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_speed_events_avro","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"outputStreams":[{"id":2,"versionId":3,"streamId":"kafka_stream_2","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1502286203440}],"timestamp":1502202061029},{"id":1,"topologyId":1,"topologyComponentBundleId":1,"versionId":3,"name":"truck-events","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"g1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"{{HOST1}}:6667","kafkaServiceName":"","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"{{CLUSTERNAME}}","fetchMinimumBytes":"1","consumerStartupDelayMs":60000,"sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_events_avro","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"outputStreams":[{"id":1,"versionId":3,"streamId":"kafka_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502202061017}],"sinks":[{"id":20,"topologyId":1,"topologyComponentBundleId":16,"versionId":3,"name":"olap-violation-predicted-cube","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"TEN_MINUTE","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT1M","aggregatorList":[{"count":{"name":"count"}}],"tranquilityZKconnect":"{{HOST1}}:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"violation-predictions-cube","clusters":"{{CLUSTERNAME}}","dimensions":["ViolationPredicted","eventSource","truckId","driverId","driverName","routeId","route","speed","eventType","latitude","longitude"]}},"timestamp":1502286203440},{"id":6,"topologyId":1,"topologyComponentBundleId":11,"versionId":3,"name":"persist-violations","description":"","config":{"properties":{"writeToWAL":true,"cluster":"1","columnFamily":"0","parallelism":1,"batchSize":100,"clusters":"{{CLUSTERNAME}}","table":"default:driver_violations"}},"timestamp":1502286203440},{"id":7,"topologyId":1,"topologyComponentBundleId":16,"versionId":3,"name":"olap-violations-cube","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"TEN_MINUTE","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT1M","aggregatorList":[{"count":{"name":"count"}}],"tranquilityZKconnect":"{{HOST1}}:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"driver-violations-cube","clusters":"{{CLUSTERNAME}}","dimensions":["eventTime","eventSource","truckId","driverId","driverName","routeId","route","speed","eventType","latitude","longitude","correlationId","geoAddress"]}},"timestamp":1502286203440},{"id":11,"topologyId":1,"topologyComponentBundleId":11,"versionId":3,"name":"persist-driver-speed-violation","description":"","config":{"properties":{"writeToWAL":true,"cluster":"1","columnFamily":"0","parallelism":1,"batchSize":100,"clusters":"{{CLUSTERNAME}}","table":"default:driver_speed"}},"timestamp":1502286203440},{"id":10,"topologyId":1,"topologyComponentBundleId":16,"versionId":3,"name":"olap-speeding-cube","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"TEN_MINUTE","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT1M","aggregatorList":[{"count":{"name":"count"}}],"tranquilityZKconnect":"{{HOST1}}:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"driver-speed-violations-cube","clusters":"{{CLUSTERNAME}}","dimensions":["driverId","driverName","route","speed_AVG","driverName_upper"]}},"timestamp":1502286203440}],"processors":[{"id":3,"topologyId":1,"topologyComponentBundleId":7,"versionId":3,"name":"join-streams","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_2","key":"driverId","with":"kafka_stream_1"}],"parallelism":1,"from":{"stream":"kafka_stream_1","key":"driverId"},"outputKeys":["kafka_stream_2:eventTime as eventTime","kafka_stream_2:eventSource as eventSource","kafka_stream_2:truckId as truckId","kafka_stream_2:driverId as driverId","kafka_stream_2:driverName as driverName","kafka_stream_2:routeId as routeId","kafka_stream_2:route as route","eventType","latitude","longitude","correlationId","geoAddress","speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":5000},"slidingInterval":{"class":".Window$Duration","durationMs":5000},"tsField":null,"lagMs":0},"outputStream":"join_processor_stream_3"}},"outputStreams":[{"id":3,"versionId":3,"streamId":"join_processor_stream_3","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":4,"topologyId":1,"topologyComponentBundleId":4,"versionId":3,"name":"detect-violations","description":"","config":{"properties":{"rules":[1,4]}},"outputStreams":[{"id":4,"versionId":3,"streamId":"rule_transform_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440},{"id":5,"versionId":3,"streamId":"rule_notifier_stream_1","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440},{"id":12,"versionId":3,"streamId":"rule_transform_stream_4","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440},{"id":13,"versionId":3,"streamId":"rule_notifier_stream_4","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":12,"topologyId":1,"topologyComponentBundleId":9,"versionId":3,"name":"split-streams","description":"","config":{"properties":{"rules":[5]}},"outputStreams":[{"id":14,"versionId":3,"streamId":"projection_transform_stream_12","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1502286203440},{"id":15,"versionId":3,"streamId":"projection_notifier_stream_12","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":16,"topologyId":1,"topologyComponentBundleId":21,"versionId":3,"name":"enrich-driver-fatigue","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_16":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}]}},"config.enrichmentSQL":"select hours_logged, miles_logged from timesheet where driverid= ${driverId} and week=${week}","outputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":true},{"name":"driverWagePlan","type":"STRING","optional":true},{"name":"driverFatigueByHours","type":"STRING","optional":true},{"name":"driverFatigueByMiles","type":"STRING","optional":true}]},"inputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false}]},"parallelism":1,"description":"ENRICH-PHOENIX","config.zkServerUrl":"{{HOST1}}:2181","inputSchemaMap":{"projection_transform_stream_12":{"eventTime":"eventTime","eventSource":"eventSource","truckId":"truckId","driverId":"driverId","driverName":"driverName","routeId":"routeId","route":"route","eventType":"eventType","latitude":"latitude","longitude":"longitude","correlationId":"correlationId","geoAddress":"geoAddress","speed":"speed","week":"week","splitJoinValue":"splitJoinValue"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverFatigueByHours, driverFatigueByMiles","name":"ENRICH-PHOENIX","config.kerberosKeyTabFile":"","jarFileName":"sam-custom-processor-0.0.5-jar-with-dependencies.jar"}},"outputStreams":[{"id":17,"versionId":3,"streamId":"custom_processor_stream_16","description":null,"topologyId":1,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":14,"topologyId":1,"topologyComponentBundleId":22,"versionId":3,"name":"enrich-weather","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_14":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]},"inputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false}]},"parallelism":1,"config.weatherServiceURL":" http://weather.com/api?lat=${latitude}&lng=${longitude}","name":"ENRICH-WEATHER","description":"ENRICH-WEATHER","jarFileName":"sam-custom-processor-0.0.5.jar","inputSchemaMap":{"projection_transform_stream_12":{"eventTime":"eventTime","eventSource":"eventSource","truckId":"truckId","driverId":"driverId","driverName":"driverName","routeId":"routeId","route":"route","eventType":"eventType","latitude":"latitude","longitude":"longitude","correlationId":"correlationId","geoAddress":"geoAddress","speed":"speed","splitJoinValue":"splitJoinValue"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.weather.WeatherEnrichmentProcessor"}},"outputStreams":[{"id":18,"versionId":3,"streamId":"custom_processor_stream_14","description":null,"topologyId":1,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":13,"topologyId":1,"topologyComponentBundleId":21,"versionId":3,"name":"enrich-driver-details","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_13":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"correlationId","type":"LONG","optional":false}]}},"config.enrichmentSQL":"select certified, wage_plan from drivers where driverid=${driverId}","outputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":true},{"name":"driverWagePlan","type":"STRING","optional":true},{"name":"driverFatigueByHours","type":"STRING","optional":true},{"name":"driverFatigueByMiles","type":"STRING","optional":true}]},"inputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false}]},"parallelism":1,"description":"ENRICH-PHOENIX","config.zkServerUrl":"{{HOST1}}:2181","inputSchemaMap":{"projection_transform_stream_12":{"eventTime":"eventTime","eventSource":"eventSource","truckId":"truckId","driverId":"driverId","driverName":"driverName","routeId":"routeId","route":"route","eventType":"eventType","latitude":"latitude","longitude":"longitude","correlationId":"correlationId","geoAddress":"geoAddress","speed":"speed","week":"week","splitJoinValue":"splitJoinValue"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverCertification, driverWagePlan","name":"ENRICH-PHOENIX","config.kerberosKeyTabFile":"","jarFileName":"sam-custom-processor-0.0.5-jar-with-dependencies.jar"}},"outputStreams":[{"id":16,"versionId":3,"streamId":"custom_processor_stream_13","description":null,"topologyId":1,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"correlationId","type":"LONG","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":17,"topologyId":1,"topologyComponentBundleId":7,"versionId":3,"name":"rejoin-streams","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"custom_processor_stream_14","key":"splitJoinValue","with":"custom_processor_stream_13"},{"type":"INNER","stream":"custom_processor_stream_16","key":"splitJoinValue","with":"custom_processor_stream_13"}],"parallelism":1,"from":{"stream":"custom_processor_stream_13","key":"splitJoinValue"},"outputKeys":["custom_processor_stream_16:splitJoinValue as splitJoinValue","driverFatigueByHours","driverFatigueByMiles","eventTime","eventSource","truckId","driverId","driverName","routeId","route","speed","eventType","latitude","longitude","correlationId","week","driverCertification","driverWagePlan","Model_Feature_FoggyWeather","Model_Feature_RainyWeather","Model_Feature_WindyWeather"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsField":null,"lagMs":0},"outputStream":"join_processor_stream_17"}},"outputStreams":[{"id":19,"versionId":3,"streamId":"join_processor_stream_17","description":null,"topologyId":1,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":15,"topologyId":1,"topologyComponentBundleId":23,"versionId":3,"name":"nomalize-model-features","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_15":{"fields":[{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]},"inputSchema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}]},"parallelism":1,"name":"NORMALIZE-MODEL-FEATURES","description":"NORMALIZE-MODEL-FEATURES","jarFileName":"sam-custom-processor-0.0.5a.jar","inputSchemaMap":{"join_processor_stream_17":{"eventTime":"eventTime","eventSource":"eventSource","truckId":"truckId","driverId":"driverId","driverName":"driverName","routeId":"routeId","route":"route","eventType":"eventType","latitude":"latitude","longitude":"longitude","correlationId":"correlationId","geoAddress":"geoAddress","speed":"speed","splitJoinValue":"splitJoinValue","Model_Feature_FoggyWeather":"Model_Feature_FoggyWeather","Model_Feature_RainyWeather":"Model_Feature_RainyWeather","Model_Feature_WindyWeather":"Model_Feature_WindyWeather","driverCertification":"driverCertification","driverWagePlan":"driverWagePlan","driverFatigueByHours":"driverFatigueByHours","driverFatigueByMiles":"driverFatigueByMiles"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.driver.predictivemodel.FeatureNormalizationProcessor"}},"outputStreams":[{"id":20,"versionId":3,"streamId":"custom_processor_stream_15","description":null,"topologyId":1,"fields":[{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":18,"topologyId":1,"topologyComponentBundleId":8,"versionId":3,"name":"predict-violation","description":"","config":{"properties":{"modelName":"driver_violation_prediction_logistic_regression","parallelism":1}},"outputStreams":[{"id":21,"versionId":3,"streamId":"pmml_stream_18","description":null,"topologyId":1,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":19,"topologyId":1,"topologyComponentBundleId":4,"versionId":3,"name":"detect-predicted-violation","description":"","config":{"properties":{"rules":[6]}},"outputStreams":[{"id":22,"versionId":3,"streamId":"rule_transform_stream_6","description":null,"topologyId":1,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440},{"id":23,"versionId":3,"streamId":"rule_notifier_stream_6","description":null,"topologyId":1,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"geoAddress","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":5,"topologyId":1,"topologyComponentBundleId":5,"versionId":3,"name":"determine-avg-speed","description":"","config":{"properties":{"rules":[1],"parallelism":1}},"outputStreams":[{"id":6,"versionId":3,"streamId":"window_transform_stream_5","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1502286203440},{"id":7,"versionId":3,"streamId":"window_notifier_stream_5","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":8,"topologyId":1,"topologyComponentBundleId":4,"versionId":3,"name":"detect-speeding-violation","description":"","config":{"properties":{"rules":[2]}},"outputStreams":[{"id":8,"versionId":3,"streamId":"rule_transform_stream_2","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1502286203440},{"id":9,"versionId":3,"streamId":"rule_notifier_stream_2","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440},{"id":9,"topologyId":1,"topologyComponentBundleId":9,"versionId":3,"name":"driver-name-upper","description":"","config":{"properties":{"rules":[3]}},"outputStreams":[{"id":10,"versionId":3,"streamId":"projection_transform_stream_9","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false},{"name":"driverName_upper","type":"STRING","optional":false}],"timestamp":1502286203440},{"id":11,"versionId":3,"streamId":"projection_notifier_stream_9","description":null,"topologyId":1,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false},{"name":"driverName_upper","type":"STRING","optional":false}],"timestamp":1502286203440}],"timestamp":1502286203440}],"edges":[{"id":2,"versionId":3,"topologyId":1,"fromId":2,"toId":3,"streamGroupings":[{"streamId":2,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1502286203440},{"id":1,"versionId":3,"topologyId":1,"fromId":1,"toId":3,"streamGroupings":[{"streamId":1,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1502286203440},{"id":3,"versionId":3,"topologyId":1,"fromId":3,"toId":4,"streamGroupings":[{"streamId":3,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":4,"versionId":3,"topologyId":1,"fromId":4,"toId":5,"streamGroupings":[{"streamId":4,"grouping":"FIELDS","fields":["driverId","driverName","route"]}],"timestamp":1502286203440},{"id":5,"versionId":3,"topologyId":1,"fromId":4,"toId":7,"streamGroupings":[{"streamId":4,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":6,"versionId":3,"topologyId":1,"fromId":4,"toId":6,"streamGroupings":[{"streamId":4,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":11,"versionId":3,"topologyId":1,"fromId":4,"toId":12,"streamGroupings":[{"streamId":12,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":12,"versionId":3,"topologyId":1,"fromId":12,"toId":13,"streamGroupings":[{"streamId":14,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":13,"versionId":3,"topologyId":1,"fromId":12,"toId":14,"streamGroupings":[{"streamId":14,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":15,"versionId":3,"topologyId":1,"fromId":12,"toId":16,"streamGroupings":[{"streamId":14,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":16,"versionId":3,"topologyId":1,"fromId":16,"toId":17,"streamGroupings":[{"streamId":17,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1502286203440},{"id":18,"versionId":3,"topologyId":1,"fromId":14,"toId":17,"streamGroupings":[{"streamId":18,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1502286203440},{"id":17,"versionId":3,"topologyId":1,"fromId":13,"toId":17,"streamGroupings":[{"streamId":16,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1502286203440},{"id":19,"versionId":3,"topologyId":1,"fromId":17,"toId":15,"streamGroupings":[{"streamId":19,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":20,"versionId":3,"topologyId":1,"fromId":15,"toId":18,"streamGroupings":[{"streamId":20,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":21,"versionId":3,"topologyId":1,"fromId":18,"toId":19,"streamGroupings":[{"streamId":21,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":22,"versionId":3,"topologyId":1,"fromId":19,"toId":20,"streamGroupings":[{"streamId":22,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":7,"versionId":3,"topologyId":1,"fromId":5,"toId":8,"streamGroupings":[{"streamId":6,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":8,"versionId":3,"topologyId":1,"fromId":8,"toId":9,"streamGroupings":[{"streamId":8,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":9,"versionId":3,"topologyId":1,"fromId":9,"toId":10,"streamGroupings":[{"streamId":10,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440},{"id":10,"versionId":3,"topologyId":1,"fromId":9,"toId":11,"streamGroupings":[{"streamId":10,"grouping":"SHUFFLE","fields":null}],"timestamp":1502286203440}],"rules":[{"id":1,"versionId":3,"topologyId":1,"name":"detect-violations","description":"detect violations","streams":["join_processor_stream_3"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_3 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_1"],"transforms":[]}],"outputStreams":["rule_transform_stream_1","rule_notifier_stream_1"],"timestamp":1502286203440},{"id":4,"versionId":3,"topologyId":1,"name":"normal-event","description":"normal event","streams":["join_processor_stream_3"],"condition":"eventType = 'Normal'","sql":"SELECT *  FROM join_processor_stream_3 WHERE eventType = 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_4"],"transforms":[]}],"outputStreams":["rule_transform_stream_4","rule_notifier_stream_4"],"timestamp":1502286203440},{"id":5,"versionId":3,"topologyId":1,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_4"],"projections":[{"functionName":"TIMESTAMP_LONG","args":["eventTime"],"outputFieldName":"splitJoinValue"},{"functionName":"GET_WEEK","args":["eventTime"],"outputFieldName":"week"},{"expr":"eventTime"},{"expr":"eventSource"},{"expr":"truckId"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"routeId"},{"expr":"route"},{"expr":"speed"},{"expr":"eventType"},{"expr":"latitude"},{"expr":"longitude"},{"expr":"correlationId"}],"sql":"SELECT TIMESTAMP_LONG(eventTime) AS \"splitJoinValue\",GET_WEEK(eventTime) AS \"week\",eventTime,eventSource,truckId,driverId,driverName,routeId,route,speed,eventType,latitude,longitude,correlationId FROM rule_transform_stream_4","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_12"],"transforms":[]}],"outputStreams":["projection_transform_stream_12","projection_notifier_stream_12"],"timestamp":1502286203440},{"id":6,"versionId":3,"topologyId":1,"name":"violation-predicted","description":"violation predicted","streams":["pmml_stream_18"],"condition":"ViolationPredicted = 'yes'","sql":"SELECT *  FROM pmml_stream_18 WHERE ViolationPredicted = 'yes'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_6"],"transforms":[]}],"outputStreams":["rule_transform_stream_6","rule_notifier_stream_6"],"timestamp":1502286203440},{"id":2,"versionId":3,"topologyId":1,"name":"detect-speeding-violation","description":"detect speeding violation","streams":["window_transform_stream_5"],"condition":"speed_AVG > '80'","sql":"SELECT *  FROM window_transform_stream_5 WHERE speed_AVG > '80'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_2"],"transforms":[]}],"outputStreams":["rule_transform_stream_2","rule_notifier_stream_2"],"timestamp":1502286203440},{"id":3,"versionId":3,"topologyId":1,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_2"],"projections":[{"functionName":"UPPER","args":["driverName"],"outputFieldName":"driverName_upper"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"},{"expr":"speed_AVG"}],"sql":"SELECT UPPER(driverName) AS \"driverName_upper\",driverId,driverName,route,speed_AVG FROM rule_transform_stream_2","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_9"],"transforms":[]}],"outputStreams":["projection_transform_stream_9","projection_notifier_stream_9"],"timestamp":1502286203440}],"windows":[{"id":1,"versionId":3,"topologyId":1,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_1"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsField":null,"lagMs":0},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_5"],"transforms":[]}],"projections":[{"functionName":"MEAN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_5","window_notifier_stream_5"],"timestamp":1502286203440}],"branchRules":[],"bundleIdToType":{"22":"CUSTOM","11":"HBASE","1":"KAFKA","23":"CUSTOM","4":"RULE","16":"DRUID","5":"WINDOW","7":"JOIN","8":"PMML","9":"PROJECTION","21":"CUSTOM"},"topologyEditorMetadata":{"topologyId":1,"versionId":3,"data":"{\"sources\":[{\"x\":108.75,\"y\":226.25,\"id\":1},{\"x\":108.75,\"y\":351.25,\"id\":2}],\"processors\":[{\"x\":357.5,\"y\":285.75,\"id\":3},{\"x\":591.25,\"y\":285,\"id\":4},{\"x\":843.75,\"y\":187.5,\"id\":5},{\"x\":1106.25,\"y\":187.5,\"id\":8},{\"x\":1353.75,\"y\":187.5,\"id\":9},{\"x\":845,\"y\":550,\"id\":12},{\"x\":1118.75,\"y\":469.5,\"id\":13},{\"x\":1120,\"y\":623.75,\"id\":14},{\"x\":1650,\"y\":551.25,\"id\":15},{\"x\":1120,\"y\":550,\"id\":16},{\"x\":1408.75,\"y\":550,\"id\":17},{\"x\":1650,\"y\":683.75,\"id\":18},{\"x\":1646.25,\"y\":792.5,\"id\":19}],\"sinks\":[{\"x\":845,\"y\":285,\"id\":6},{\"x\":843.75,\"y\":386.25,\"id\":7},{\"x\":1613.75,\"y\":145,\"id\":10},{\"x\":1615,\"y\":230,\"id\":11},{\"x\":1646.5623779296875,\"y\":887.1874389648438,\"id\":20}],\"graphTransforms\":{\"dragCoords\":[-49.58052169084203,-40.96951533716327],\"zoomScale\":0.7943265882931366},\"customNames\":[{\"uiname\":\"enrich-driver-details\",\"customProcessorName\":\"ENRICH-PHOENIX\"},{\"uiname\":\"enrich-weather\",\"customProcessorName\":\"ENRICH-WEATHER\"},{\"uiname\":\"nomalize-model-features\",\"customProcessorName\":\"NORMALIZE-MODEL-FEATURES\"},{\"uiname\":\"enrich-driver-fatigue\",\"customProcessorName\":\"ENRICH-PHOENIX\"}]}","timestamp":1502286203440}}